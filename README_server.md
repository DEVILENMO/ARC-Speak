# ARC Speak Server éŸ³é¢‘ä¼˜åŒ–ç‰ˆ

## æœåŠ¡ç«¯éŸ³é¢‘å¤„ç†åŠŸèƒ½

### ðŸŽµ éŸ³é¢‘è´¨é‡ä¼˜åŒ–ç‰¹æ€§

1. **ç»Ÿä¸€éŸ³é¢‘æ ¼å¼**
   - æ ‡å‡†é‡‡æ ·çŽ‡ï¼š48kHz
   - æ ‡å‡†å£°é“ï¼šå•å£°é“
   - æ•°æ®ç±»åž‹ï¼šfloat32
   - å—å¤§å°æŽ§åˆ¶ï¼š10ms-100ms

2. **æ™ºèƒ½éŸ³é¢‘å¤„ç†**
   - **é‡é‡‡æ ·**ï¼šè‡ªåŠ¨å°†ä¸åŒé‡‡æ ·çŽ‡çš„éŸ³é¢‘è½¬æ¢ä¸º48kHz
   - **èŒƒå›´æ£€æŸ¥**ï¼šæ£€æµ‹å¹¶ä¿®å¤éŸ³é¢‘å‰Šæ³¢é—®é¢˜
   - **è´¨é‡å¢žå¼º**ï¼šé™å™ªå’Œå¹³æ»‘å¤„ç†
   - **æ ¼å¼éªŒè¯**ï¼šç¡®ä¿éŸ³é¢‘æ•°æ®å®Œæ•´æ€§

3. **éŸ³é¢‘å¤„ç†ç»Ÿè®¡**
   - å¤„ç†å—æ•°ç»Ÿè®¡
   - é‡é‡‡æ ·çŽ‡ç»Ÿè®¡
   - å¤„ç†æˆåŠŸçŽ‡ç›‘æŽ§
   - é”™è¯¯çŽ‡è¿½è¸ª

### ðŸ› ï¸ å®‰è£…å’Œè¿è¡Œ

1. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

2. **å¯åŠ¨æœåŠ¡å™¨**
```bash
python app.py
```

### ðŸ“Š éŸ³é¢‘å¤„ç†API

#### èŽ·å–éŸ³é¢‘é…ç½®
```http
GET /api/audio/config
```
è¿”å›žæœåŠ¡ç«¯æ”¯æŒçš„éŸ³é¢‘æ ¼å¼é…ç½®ã€‚

#### éŸ³é¢‘å¤„ç†æµ‹è¯•
```http
POST /api/audio/test
Content-Type: application/json

{
    "audio_data": [0.1, 0.2, -0.1, ...],
    "metadata": {
        "samplerate": 44100,
        "channels": 1,
        "dtype": "float32"
    }
}
```

#### éŸ³é¢‘ç»Ÿè®¡ï¼ˆç®¡ç†å‘˜ï¼‰
```http
GET /api/audio/stats
```
èŽ·å–éŸ³é¢‘å¤„ç†ç»Ÿè®¡ä¿¡æ¯ã€‚

#### é‡ç½®ç»Ÿè®¡ï¼ˆç®¡ç†å‘˜ï¼‰
```http
POST /api/audio/stats/reset
```

### ðŸ”§ å…³é”®éŸ³é¢‘å¤„ç†åŠŸèƒ½

#### 1. éŸ³é¢‘é‡é‡‡æ ·
- ä½¿ç”¨ scipy è¿›è¡Œé«˜è´¨é‡é‡é‡‡æ ·ï¼ˆå¦‚æžœå¯ç”¨ï¼‰
- å¤‡ç”¨çº¿æ€§æ’å€¼é‡é‡‡æ ·
- æ”¯æŒ 22.05kHzã€44.1kHzã€48kHz ä¹‹é—´çš„è½¬æ¢

#### 2. éŸ³é¢‘è§„èŒƒåŒ–
- æ£€æµ‹éŸ³é¢‘å‰Šæ³¢ï¼ˆ>1.0 æˆ– <-1.0ï¼‰
- è‡ªåŠ¨è§„èŒƒåŒ–åˆ°æœ‰æ•ˆèŒƒå›´
- ä¿æŒéŸ³é¢‘åŠ¨æ€èŒƒå›´

#### 3. éŸ³é¢‘å¢žå¼º
- å™ªéŸ³é˜ˆå€¼è¿‡æ»¤ï¼ˆç§»é™¤æžå°ä¿¡å·ï¼‰
- 3ç‚¹ç§»åŠ¨å¹³å‡å¹³æ»‘
- å‡å°‘ä¼ è¾“å™ªéŸ³

#### 4. é”™è¯¯å¤„ç†
- éŸ³é¢‘æ•°æ®éªŒè¯
- æ ¼å¼æ£€æŸ¥
- å¼‚å¸¸æ¢å¤
- å®¢æˆ·ç«¯é”™è¯¯é€šçŸ¥

### ðŸš€ æ€§èƒ½ä¼˜åŒ–

1. **å—å¤§å°æŽ§åˆ¶**
   - æœ€å°å—ï¼š480 samples (10ms @ 48kHz)
   - æœ€å¤§å—ï¼š4800 samples (100ms @ 48kHz)
   - è‡ªåŠ¨å¡«å……æˆ–æˆªæ–­

2. **å¤„ç†æ•ˆçŽ‡**
   - NumPy å‘é‡åŒ–æ“ä½œ
   - æ‰¹é‡å¤„ç†
   - å†…å­˜ä¼˜åŒ–

3. **å®žæ—¶ç›‘æŽ§**
   - å¤„ç†å»¶è¿Ÿç»Ÿè®¡
   - è´¨é‡æŒ‡æ ‡è¿½è¸ª
   - æ€§èƒ½åŸºå‡†æµ‹è¯•

### ðŸ” é—®é¢˜è¯Šæ–­

#### å¸¸è§é—®é¢˜è§£å†³
1. **ç”µéŸ³/æ‚éŸ³**ï¼šæ£€æŸ¥é‡‡æ ·çŽ‡æ˜¯å¦ä¸€è‡´
2. **éŸ³é¢‘ä¸­æ–­**ï¼šéªŒè¯å—å¤§å°è®¾ç½®
3. **éŸ³è´¨ä¸‹é™**ï¼šç¡®è®¤scipyå·²å®‰è£…
4. **å»¶è¿Ÿè¿‡é«˜**ï¼šè°ƒæ•´å—å¤§å°å‚æ•°

#### è°ƒè¯•å·¥å…·
- éŸ³é¢‘å¤„ç†æ—¥å¿—
- ç»Ÿè®¡APIç›‘æŽ§
- æµ‹è¯•APIéªŒè¯
- é”™è¯¯äº‹ä»¶è¿½è¸ª

### ðŸ“ é…ç½®é€‰é¡¹

åœ¨ `app.py` ä¸­å¯è°ƒæ•´çš„å‚æ•°ï¼š

```python
STANDARD_SAMPLERATE = 48000  # ç›®æ ‡é‡‡æ ·çŽ‡
STANDARD_CHANNELS = 1        # å£°é“æ•°
MAX_AUDIO_CHUNK_SIZE = 4800  # æœ€å¤§å—å¤§å°
MIN_AUDIO_CHUNK_SIZE = 480   # æœ€å°å—å¤§å°
```

### ðŸ”„ ç‰ˆæœ¬æ›´æ–°

- **v2.0**ï¼šæ·»åŠ éŸ³é¢‘å¤„ç†å’Œè´¨é‡ä¼˜åŒ–
- **v1.9**ï¼šç»Ÿä¸€éŸ³é¢‘æ ¼å¼æ”¯æŒ
- **v1.8**ï¼šå¢žåŠ é‡é‡‡æ ·åŠŸèƒ½
- **v1.7**ï¼šéŸ³é¢‘è´¨é‡ç›‘æŽ§

éŸ³é¢‘ä¼˜åŒ–æ˜¾è‘—æ”¹å–„äº†è¯­éŸ³é€šè¯è´¨é‡ï¼Œæ¶ˆé™¤äº†ç”µéŸ³å’Œæ‚éŸ³é—®é¢˜ã€‚ 